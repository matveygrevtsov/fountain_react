(this.webpackJsonpfountain_react=this.webpackJsonpfountain_react||[]).push([[0],{12:function(t,e,i){},14:function(t,e,i){"use strict";i.r(e);var n=i(0),s=i.n(n),a=i(6),r=i.n(a),h=(i(12),i(7)),o=i(5),c=i(3),u=i(4),d=function(t){return Math.random()*(t[1]-t[0])+t[0]},m=function(t){return Promise.all(t.map((function(t){return function(t){return new Promise((function(e,i){var n=new Image;n.src=t,n.onload=function(){return e(n)},n.onerror=function(t){return i(t)}}))}(t)})))},v=function(){var t=0;return function(e){var i=e<500?0:e-t;return t=e,i}}(),f=function(){function t(e){Object(c.a)(this,t),this.animationSpeed=e.animationSpeed,this.power=e.power,this.spreadAngle=e.spreadAngle,this.g=e.gravity,this.itemsSize=[e.minItemsSize,e.maxItemsSize],this.rotationSpeed=e.rotationSpeed,this.skin=e.skin,this.canvas=e.canvasRef,this.id=e.id,this.resetParams(),this.t=d([-10,0])}return Object(u.a)(t,[{key:"resetParams",value:function(){this.t=0,this.shotAngle=d([Math.PI*(180-this.spreadAngle)/360,Math.PI*(180+this.spreadAngle)/360]),this.width=d(this.itemsSize),this.x=(this.canvas.current.width-this.width)/2,this.y=this.canvas.current.height}},{key:"incrementTime",value:function(){this.t+=this.animationSpeed*t.period/1e3}},{key:"hidden",value:function(){var t=this.canvas.current;return this.y>t.height+2*this.width||this.y<-2*this.width||this.x>t.width+2*this.width||this.x<-2*this.width}},{key:"move",value:function(){var t=this.canvas.current;this.incrementTime(),this.x=(t.width-this.width)/2+this.power*this.t*Math.cos(this.shotAngle),this.y=t.height-this.power*this.t*Math.sin(this.shotAngle)+this.g*this.t*this.t/2,this.hidden()&&this.resetParams()}},{key:"render",value:function(){var t=this.canvas.current.getContext("2d");t.save(),t.translate(this.x+this.width/2,this.y+this.width/2),t.rotate(this.t*this.rotationSpeed*(this.id%2*2-1)),t.translate(-this.x-this.width/2,-this.y-this.width/2),t.drawImage(this.skin,this.x,this.y,this.width,this.width),t.restore(),this.move()}}]),t}(),g=function(){function t(e){var i=this;Object(c.a)(this,t),this.state=e,this.canvas=e.canvasRef,this.setCanvasSize(),window.addEventListener("resize",(function(){return i.setCanvasSize()})),this.id=this.canvas.current.id}return Object(u.a)(t,[{key:"setCanvasSize",value:function(){this.canvas.current.width=window.innerWidth,this.canvas.current.height=window.innerHeight}},{key:"createItems",value:function(){var e=this;return m(this.state.imgSkins).then((function(i){for(var n=[],s=0;s<e.state.itemsNumber;s++)n.push(new f(Object(o.a)(Object(o.a)({},e.state),{},{skin:i[s%i.length],id:s})));return t[e.id]=t[e.id]?[].concat(Object(h.a)(t[e.id]),n):n,t[e.id]}))}},{key:"start",value:function(){var e=this;this.createItems().then((function(){var i=e.canvas.current.getContext("2d");e.requestAnimation=requestAnimationFrame((function n(s){f.period=v(s),i.clearRect(0,0,e.canvas.current.width,e.canvas.current.height),t[e.id].forEach((function(t){return t.render()})),e.requestAnimation=requestAnimationFrame(n)}))}),(function(){return console.log("Images loading error")}))}},{key:"destroy",value:function(){cancelAnimationFrame(this.requestAnimation)}}]),t}(),w=i.p+"static/media/coin1.2831f4f9.svg",l=i.p+"static/media/coin2.323f5163.svg",p=i.p+"static/media/crown.c4384d7a.png",S=i(1),y=function(){var t=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e=new g({animationSpeed:2.9,power:155,itemsNumber:52,spreadAngle:99,gravity:8,minItemsSize:215,maxItemsSize:421,rotationSpeed:.7,imgSkins:[w,l],canvasRef:t});e.start();var i=new g({animationSpeed:2.9,power:155,itemsNumber:3,spreadAngle:99,gravity:8,minItemsSize:215,maxItemsSize:421,rotationSpeed:0,imgSkins:[p],canvasRef:t});return i.start(),function(){e.destroy(),i.destroy()}}),[]),Object(S.jsx)("canvas",{id:"fountain1",ref:t})},b=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,15)).then((function(e){var i=e.getCLS,n=e.getFID,s=e.getFCP,a=e.getLCP,r=e.getTTFB;i(t),n(t),s(t),a(t),r(t)}))};r.a.render(Object(S.jsx)(s.a.StrictMode,{children:Object(S.jsx)(y,{})}),document.getElementById("root")),b()}},[[14,1,2]]]);
//# sourceMappingURL=main.97ba88e9.chunk.js.map